var wpbdp=window.wpbdp||{};!function($){var dnd=wpbdp.dnd={setup:function($area,options){var options=$.extend(options,{}),$input=$area.find('input[type="file"]');$area.data("dnd-working",!1);$area.on("dragover",function(e){$(this).hasClass("dragging")||$(this).addClass("dragging")}).on("dragleave",function(e){$(this).hasClass("dragging")&&$(this).removeClass("dragging")});$input.fileupload({url:$area.attr("data-action")?$area.attr("data-action"):options.url,sequentialUploads:!0,dataType:"json",singleFileUploads:!1,dropZone:$area,formData:function(form){return[{name:"dummy",value:1}]},send:function(e,data){if($area.data("dnd-working"))return!1;if("undefined"!=typeof options.validate&&!options.validate.call($area,data))return!1;$area.removeClass("dragging");$area.removeClass("error");$area.data("dnd-working",!0);$area.find(".dnd-area-inside").fadeOut("fast",function(){$area.find(".dnd-area-inside-working span").text(data.files.length);$area.find(".dnd-area-inside-working").fadeIn("fast")});return!0},done:function(e,data){var res=data.result;$area.data("dnd-working",!1);$area.find(".dnd-area-inside-working").hide();$area.find(".dnd-area-inside").fadeIn("fast");"undefined"!=typeof options.done&&options.done.call($area,res)}});"undefined"!=typeof options.init&&options.init.call($area)}}}(jQuery);