var WPBDP_associations_fieldtypes={},WPBDPAdmin_Tooltip={};function wpbdpSelectSubnav(){var wpbdpMenu=jQuery("#toplevel_page_wpbdp_admin");jQuery(wpbdpMenu).removeClass("wp-not-current-submenu").addClass("wp-has-current-submenu wp-menu-open"),jQuery("#toplevel_page_wpbdp_admin a.wp-has-submenu").removeClass("wp-not-current-submenu").addClass("wp-has-current-submenu wp-menu-open"),jQuery("#toplevel_page_wpbdp_admin ul.wp-submenu-wrap li.wp-first-item").addClass("current")}function wpbdp_load_placeholder($v){var action=$v.attr("data-action"),post_id=$v.attr("data-post_id"),baseurl=$v.attr("data-baseurl");$v.load(ajaxurl,{action:action,post_id:post_id,baseurl:baseurl})}!function($){var WPBDPAdmin_Modal={init:function(){WPBDPAdmin_Modal.initConfirmModal(),WPBDPAdmin_Modal.initTaxonomyModal()},initConfirmModal:function(){var modal;$("a[data-bdconfirm]").length&&($(".wpbdp-admin-page").append(WPBDPAdmin_Modal.getHtml()),modal=WPBDPAdmin_Modal.initModal("#wpbdp-admin-modal"),$(document).on("click","a[data-bdconfirm]",function(e){e.preventDefault(),modal.find("h2").text(this.getAttribute("data-bdconfirm")),modal.find(".inside").addClass("empty"),modal.find(".wpbdp-continue").attr("href",this.getAttribute("href")),modal.dialog("open")}))},getHtml:function(){return'<div id="wpbdp-admin-modal" class="hidden settings-lite-cta">'+WPBDPAdmin_Modal.getHeaderHtml()+'<div class="wpbdp-modal-bottom"><a href="#" class="dismiss-button" title="Dismiss">'+wpbdp_global.cancel+'</a><a href="#" class="wpbdp-continue wpbdp-button-primary alignright">'+wpbdp_global.continue+"</a></div></div>"},initTaxonomyModal:function(){var modal,form=$("#addtag").closest(".form-wrap");form.length&&($(".wpbdp-admin-page").append(WPBDPAdmin_Modal.getFormHtml()),modal=WPBDPAdmin_Modal.initModal("#wpbdp-add-taxonomy-form"),$(document).on("click",".wpbdp-add-taxonomy-form",function(e){e.preventDefault();e=form.find("h2:first");e.hide(),modal.find("h2").text(e.text()),modal.find(".inside").html(form),modal.dialog("open")}))},getFormHtml:function(){return'<div id="wpbdp-add-taxonomy-form" class="hidden settings-lite-cta">'+WPBDPAdmin_Modal.getHeaderHtml()+"</div>"},getHeaderHtml:function(){return'<div class="wpbdp-modal-top"><a href="#" class="dismiss alignright" title="Dismiss"><img src="'+wpbdp_global.assets+'/images/icons/close.svg" width="24" height="24"/></a><h2>'+wpbdp_global.confirm+'</h2></div><div class="inside"></div>'},initModal:function(id,width){var $info=$(id);return!($info.length<1)&&($info.dialog({dialogClass:"wpbdp-admin-dialog",modal:!0,autoOpen:!1,closeOnEscape:!0,width:width=void 0===width?"550px":width,resizable:!1,draggable:!1,open:function(){$(".ui-dialog-titlebar").addClass("hidden").removeClass("ui-helper-clearfix"),$(".ui-widget-overlay").addClass("wpbdp-modal-overlay"),$(".wpbdp-admin-dialog").removeClass("ui-widget ui-widget-content ui-corner-all"),$info.removeClass("ui-dialog-content ui-widget-content"),WPBDPAdmin_Modal.onCloseModal($info)},close:function(){$(".ui-widget-overlay").removeClass("wpbdp-modal-overlay"),$(".spinner").css("visibility","hidden"),this.removeAttribute("data-option-type");var optionType=document.getElementById("bulk-option-type");optionType&&(optionType.value="")}}),$info)},onCloseModal:function($modal){function closeModal(e){e.preventDefault(),$modal.dialog("close")}$(".ui-widget-overlay").on("click",closeModal),$modal.on("click","a.dismiss, .dismiss-button",closeModal)}},WPBDPAdmin_FormFields=(window.WPBDPAdmin_Tooltip={$layout_container:null,$menu_items:null,$menu_state:null,init:function(){WPBDPAdmin_Tooltip.maybeHighlightMenu(),WPBDPAdmin_Tooltip.$layout_container=$(".wpbdp-admin-row"),WPBDPAdmin_Tooltip.$menu_items=WPBDPAdmin_Tooltip.$layout_container.find(".wpbdp-nav-item a"),WPBDPAdmin_Tooltip.$menu_state=window.localStorage.getItem("_wpbdp_admin_menu"),$(document).on("click",".wpbdp-nav-toggle",WPBDPAdmin_Tooltip.onNavToggle),WPBDPAdmin_Tooltip.layoutAdjustment()},maybeHighlightMenu:function(){"undefined"!=typeof wpbdpSelectNav&&wpbdpSelectSubnav()},onNavToggle:function(e){e.preventDefault(),WPBDPAdmin_Tooltip.$layout_container.toggleClass("minimized"),WPBDPAdmin_Tooltip.$layout_container.hasClass("minimized")?(window.localStorage.setItem("_wpbdp_admin_menu","minimized"),WPBDPAdmin_Tooltip.$menu_items.addClass("wpbdp-nav-tooltip")):(window.localStorage.removeItem("_wpbdp_admin_menu"),WPBDPAdmin_Tooltip.$menu_items.removeClass("wpbdp-nav-tooltip"))},layoutAdjustment:function(){var menu=document.getElementById("adminmenuback");null!==menu&&WPBDPAdmin_Tooltip.$layout_container.css("min-height",menu.offsetHeight+menu.style.bottom+"px"),window.matchMedia("screen and (max-width: 768px)").matches&&WPBDPAdmin_Tooltip.$menu_items.addClass("wpbdp-nav-tooltip"),"minimized"===WPBDPAdmin_Tooltip.$menu_state&&(WPBDPAdmin_Tooltip.$layout_container.addClass("minimized"),WPBDPAdmin_Tooltip.$menu_items.addClass("wpbdp-nav-tooltip"))}},WPBDPAdmin_Tooltip.init(),{$f_association:null,$f_fieldtype:null,init:function(){var fieldForm=$("form#wpbdp-formfield-form");WPBDPAdmin_FormFields.$f_association=$(fieldForm).find("select#field-association"),fieldForm.on("change","select#field-association",WPBDPAdmin_FormFields.onAssociationChange),WPBDPAdmin_FormFields.$f_fieldtype=$(fieldForm).find("select#field-type"),fieldForm.on("change","select#field-type",WPBDPAdmin_FormFields.onFieldTypeChange),fieldForm.on("change","select#field-validator",WPBDPAdmin_FormFields.onFieldValidatorChange),$("#wpbdp-fieldsettings").on("click",".iframe-confirm a",function(e){e.preventDefault(),$(this).hasClass("yes")||$('#wpbdp-fieldsettings input[name="field[allow_iframes]"]').prop("checked",!1),$(this).parents(".iframe-confirm").hide()}),$("#wpbdp-fieldsettings").on("change",'input[name="field[allow_iframes]"]',function(){$(this).is(":checked")?$(".iframe-confirm").show():$(".iframe-confirm").hide()}),$("#wpbdp-formfield-form").on("change",'input[name="field[display_flags][]"][value="search"]',function(){$(".if-display-in-search").toggle($(this).is(":checked"))}),$(".wpbdp-admin-page-formfields .wp-list-table tbody").sortable({placeholder:"wpbdp-draggable-highlight",handle:".wpbdp-drag-handle",axis:"y",cursor:"move",opacity:.9,update:function(event,ui){var sorted_items=[];$(this).find(".wpbdp-drag-handle").each(function(i,v){sorted_items.push($(v).attr("data-field-id"))}),sorted_items&&$.post(ajaxurl,{action:"wpbdp-formfields-reorder",order:sorted_items})}}),$("#wpbdp-formfield-form").on("change",'select[name="limit_categories"]',function(){var form=$(this).parents("form").find("#limit-categories-list");"1"===$(this).val()?form.removeClass("hidden"):form.addClass("hidden")})},onFieldTypeChange:function(){var $field_type=$(this).find("option:selected");$field_type.length&&($field_type=$field_type.val(),$("select#field-validator").prop("disabled",!1),"url"==$field_type?($("select#field-validator option").not('[value="url"]').prop("disabled",!0).prop("selected",!1),$('select#field-validator option[value="url"]').prop("selected",!0)):$("select#field-validator option").prop("disabled",!1),"social-twitter"==$field_type&&$("select#field-validator").prop("disabled",!0),$field_type={action:"wpbdp-renderfieldsettings",association:WPBDPAdmin_FormFields.$f_association.find("option:selected").val(),field_type:$field_type,field_id:$('#wpbdp-formfield-form input[name="field[id]"]').val()},$.post(ajaxurl,$field_type,function(response){response.ok&&response.html?($("#wpbdp-fieldsettings-html").html(response.html),$("#wpbdp-fieldsettings").show()):($("#wpbdp-fieldsettings-html").empty(),$("#wpbdp-fieldsettings").hide())},"json"),WPBDPAdmin_FormFields.onFieldValidatorChange())},onAssociationChange:function(){$f_fieldtype=WPBDPAdmin_FormFields.$f_fieldtype;var association=$(this).val(),valid_types=WPBDP_associations_fieldtypes[association],private_option=$("#wpbdp_private_field"),private_option=($f_fieldtype.find("option").prop("disabled",!1),$f_fieldtype.find("option").each(function(i,v){$.inArray($(v).val(),valid_types)<0&&$(v).prop("disabled",!0)}),$f_fieldtype.trigger("change"),0<=["title","content","category"].indexOf(association)?(private_option.find("input").prop("disabled",!0),private_option.hide()):(private_option.find("input").prop("disabled",!1),private_option.show()),$(this).parents("form").find(".limit-categories"));0<=["title","category"].indexOf(association)?private_option.addClass("hidden"):private_option.removeClass("hidden")},onFieldValidatorChange:function(){var $field_validator=$(this).find("option:selected"),field_type=WPBDPAdmin_FormFields.$f_fieldtype.find("option:selected").val();"textfield"===field_type||"textarea"===field_type?"word_number"===$field_validator.val()?($("#wpbdp_word_count").show(),$('select#field-validator option[value="word_number"]').prop("disabled",!1)):$("#wpbdp_word_count").hide():($("#wpbdp_word_count").hide(),$('select#field-validator option[value="word_number"]').prop("disabled",!0).prop("selected",!1))}}),WPBDPAdmin_Notifications={notificationContainer:null,preAdminNotifications:null,adminNotifications:null,init:function(){this.notificationContainer=$(".wpbdp-bell-notifications"),this.preAdminNotifications=$(".notice:hidden"),this.adminNotifications=this.notificationContainer.find(".wpbdp-bell-notifications-list"),WPBDPAdmin_Notifications.parseNotifications()},parseNotifications:function(){if(WPBDPAdmin_Notifications.preAdminNotifications.length<1)return!0;var notifications=[],snackbars=[];WPBDPAdmin_Notifications.preAdminNotifications.each(function(){var notification=$(this),mainMsg="message"===this.id;if(notification.hasClass("wpbdp-inline-notice"))return!1;(notification.hasClass("wpbdp-notice")||mainMsg)&&(notification.hasClass("is-dismissible")&&!mainMsg?("missing_premium"===this.dataset.dismissibleId&&notification.find(".notice-dismiss").attr({"data-dismissible-id":this.dataset.dismissibleId,"data-nonce":this.dataset.nonce}),notifications.push('<li class="wpbdp-bell-notice '+this.classList+'">'+notification.html()+"</li>")):snackbars.push(notification.html()),notification.remove())}),WPBDPAdmin_Notifications.adminNotifications.append(notifications.join(" ")),0<notifications.length&&$(".wpbdp-bell-notification").show(),0<snackbars.length&&snackbars.forEach(function(value,index,array){WPBDPAdmin_Notifications.generateSnackBar(value)})},generateSnackBar:function(notification){var snackbar=$("<div>",{class:"wpbdp-snackbar",html:notification});$("#wpbdp-snackbar-notices").append(snackbar),snackbar.find(".notice-dismiss").on("click",function(e){e.preventDefault(),snackbar.fadeOut()}),setTimeout(function(){snackbar.remove()},25e3)}};$(document).ready(function(){WPBDPAdmin_FormFields.init(),WPBDPAdmin_Modal.init(),WPBDPAdmin_Notifications.init(),$(".wpbdp-tooltip").tooltip({tooltipClass:"wpbdp-admin-tooltip-content"})});$(document).on("click",".wpbdp-notice.is-dismissible > .notice-dismiss, .wpbdp-notice .wpbdp-notice-dismiss",function(e){e.preventDefault();var e=$(this),$notice=e.closest(".wpbdp-notice"),link=e.attr("href");link&&window.open(link,"_blank").focus(),function($notice,$button){$notice.fadeOut("fast",function(){$notice.remove()}),$.post(ajaxurl,{action:"wpbdp_dismiss_notification",id:$button.data("dismissible-id"),nonce:$button.data("nonce")})}($notice,e)})}(jQuery),jQuery(document).ready(function($){$(".wpbdp-admin-page-fees .wp-list-table tbody").sortable({placeholder:"wpbdp-draggable-highlight",handle:".wpbdp-drag-handle",axis:"y",cursor:"move",opacity:.9,update:function(event,ui){var rel_rows=$(".free-fee-related-tr").remove(),sorted_items=($("tr.free-fee").after(rel_rows),[]);$(this).find(".wpbdp-drag-handle").each(function(i,v){sorted_items.push($(v).attr("data-fee-id"))}),sorted_items&&$.post(ajaxurl,{action:"wpbdp-admin-fees-reorder",order:sorted_items})}}),$(document).on("click",".fee-order-submit",function(e){e.preventDefault(),$.ajax({url:ajaxurl,data:$(this).parent("form").serialize(),dataType:"json",type:"POST",success:function(res){res.success&&location.reload()}})}),$(".wpbdp-ajax-placeholder").each(function(i,v){wpbdp_load_placeholder($(v))}),$(document).on("click","input#doaction, input#doaction2",function(e){var action_name="doaction"==$(this).attr("id")?"action":"action2",action_name=$('select[name="'+action_name+'"] option:selected'),action_val=action_name.val();if("listing"==action_val.split("-")[0]){var uri,action_val=action_val.split("-")[1];if("sep0"!=action_val&&"sep1"!=action_val&&"sep2"!=action_val)return action_val=$('input[name="post[]"]:checked'),uri=action_name.attr("data-uri"),action_val.each(function(i,v){uri+="&post[]="+$(v).val()}),window.location.href=uri,!1}return!0}),$(".wpbdp-admin-page-debug-info").on("click","a.current-nav",function(e){e.preventDefault(),$(".wpbdp-admin-page-debug-info a.current-nav").not(this).removeClass("current"),$(this).addClass("current"),$(".wpbdp-debug-section").hide(),$('.wpbdp-debug-section[data-id="'+$(this).attr("href")+'"]').show()}),0<$(".wpbdp-admin-page-debug-info a.current-nav").length&&$(".wpbdp-admin-page-debug-info a.current-nav").get(0).trigger("click"),$(".wpbdp-page-admin-transactions").on("click",".column-actions a.details-link",function(e){e.preventDefault();var e=$(this).parents("tr"),$details=e.find("div.more-details"),$tr_details=e.next("tr.more-details-row");0<$tr_details.length?($tr_details.remove(),$(this).text($(this).text().replace("-","+"))):($(this).text($(this).text().replace("+","-")),e.after('<tr class="more-details-row"><td colspan="7">'+$details.html()+"</td></tr>").show())})});var WPBDP_Admin={};function wpbdpAddons(){function activateAddon(e){e.preventDefault(),installOrActivate(this,"wpbdp_activate_addon")}function installAddon(e){e.preventDefault(),installOrActivate(this,"wpbdp_install_addon")}function installOrActivate(clicked,action){jQuery(".wpbdp-addon-error").remove();var button=jQuery(clicked),clicked=button.attr("rel"),el=button.parent(),message=el.parent().find(".wpbdp-addon-status");button.addClass("wpbdp-loading-button"),jQuery.ajax({url:ajaxurl,type:"POST",async:!0,cache:!1,dataType:"json",data:{action:action,nonce:wpbdp_global.nonce,plugin:clicked},success:function(response){var error=extractErrorFromAddOnResponse(response);error?addonError(error,el,button):afterAddonInstall(response,button,message,el)},error:function(){button.removeClass("wpbdp-loading-button")}})}function installAddonWithCreds(e){e.preventDefault();var proceed=jQuery(this),el=proceed.parent().parent(),e=proceed.attr("rel");proceed.addClass("wpbdp-loading-button"),jQuery.ajax({url:ajaxurl,type:"POST",async:!0,cache:!1,dataType:"json",data:{action:"wpbdp_install_addon",nonce:wpbdp_global.nonce,plugin:e,hostname:el.find("#hostname").val(),username:el.find("#username").val(),password:el.find("#password").val()},success:function(response){var error=extractErrorFromAddOnResponse(response);error?addonError(error,el,proceed):afterAddonInstall(response,proceed,message,el)},error:function(){proceed.removeClass("wpbdp-loading-button")}})}function afterAddonInstall(response,button,message,el){button.css({opacity:"0"}),message.text("Active"),jQuery("#wpbdp-oneclick").hide(),jQuery("#wpbdp-addon-status").text(response).show(),jQuery("#wpbdp-upgrade-modal h2").hide(),jQuery("#wpbdp-upgrade-modal .wpbdp-lock-icon").addClass("wpbdp-lock-open-icon"),jQuery("#wpbdp-upgrade-modal .wpbdp-lock-icon use").attr("xlink:href","#wpbdp-lock-open-icon"),el.parent().removeClass("wpbdp-addon-not-installed wpbdp-addon-installed").addClass("wpbdp-addon-active"),button.removeClass("wpbdp-loading-button"),0<document.querySelectorAll(".wpbdp-admin-page-import, #wpbdp-admin-smtp, #wpbdp-welcome").length&&window.location.reload()}function extractErrorFromAddOnResponse(response){return"string"!=typeof response&&(void 0===response.success||!response.success)&&(response.form&&jQuery(response.form).is("#message")?{message:jQuery(response.form).find("p").html()}:response)}function addonError(response,el,button){response.form?(jQuery(".wpbdp-inline-error").remove(),button.closest(".wpbdp-card").html(response.form).css({padding:5}).find("#upgrade").attr("rel",button.attr("rel")).on("click",installAddonWithCreds)):(el.append('<div class="wpbdp-addon-error wpbdp_error_style"><p><strong>'+response.message+"</strong></p></div>"),button.removeClass("wpbdp-loading-button"),jQuery(".wpbdp-addon-error").delay(4e3).fadeOut())}return{init:function(){jQuery(document).on("click",".wpbdp-install-addon",installAddon),jQuery(document).on("click",".wpbdp-activate-addon",activateAddon)}}}WPBDP_Admin.payments={},WPBDP_Admin.ProgressBar=function($item,settings){$item.empty(),$item.html('<div class="wpbdp-progress-bar"><span class="progress-text">0%</span><div class="progress-bar"><div class="progress-bar-outer"><div class="progress-bar-inner" style="width: 0%;"></div></div></div>'),this.$item=$item,this.$text=$item.find(".progress-text"),this.$bar=$item.find(".progress-bar"),this.set=function(completed,total){completed=Math.round(100*parseInt(completed)/parseInt(total));this.$text.text(completed+"%"),this.$bar.find(".progress-bar-inner").attr("style","width: "+completed+"%;")}},function($){var s=WPBDP_Admin.settings={init:function(){$("#wpbdp-settings-quick-search-fields").on("change",":checkbox",function(){var $container=$("#wpbdp-settings-quick-search-fields"),text_fields=$container.data("text-fields"),selected=$container.find(":checkbox:checked").map(function(){return parseInt($(this).val())}).get(),show_warning=!1;if(0<selected.length&&0<text_fields.length)for(var i=0;i<text_fields.length;i++)if(-1<$.inArray(text_fields[i],selected)){show_warning=!0;break}show_warning?$("#wpbdp-settings-quick-search-fields .text-fields-warning").fadeIn("fast"):$("#wpbdp-settings-quick-search-fields .text-fields-warning").fadeOut("fast")}),$("#wpbdp-settings-currency select").on("change",function(){"AED"===$(this).val()?$("#wpbdp-settings-currency .wpbdp-setting-description").show():$("#wpbdp-settings-currency .wpbdp-setting-description").hide()}),$("#wpbdp-settings-currency select").trigger("change")}};$(document).ready(function(){0<$("#wpbdp-admin-page-settings").length&&s.init()})}(jQuery),jQuery(function($){var $form,thisPage=$(".wpbdp-admin-page-uninstall");0!==thisPage.length&&($form=$("#wpbdp-uninstall-capture-form"),thisPage.on("click","#wpbdp-uninstall-proceed-btn",function(e){e.preventDefault(),$("#wpbdp-uninstall-messages").fadeOut("fast",function(){$form.fadeIn("fast")})}),thisPage.on("change",'input[name="uninstall[reason_id]"]',function(e){"0"===$(this).val()?$("form#wpbdp-uninstall-capture-form .custom-reason").fadeIn():$("form#wpbdp-uninstall-capture-form .custom-reason").fadeOut("fast",function(){$(this).val("")})}))}),function($){$(document).ready(function(){0!==$("body.wp-admin.widgets-php").length&&$("body.wp-admin.widgets-php").on("change","input.wpbdp-toggle-images",function(){$(this).is(":checked")?$(this).parents(".widget").find(".thumbnail-width-config").fadeIn("fast"):$(this).parents(".widget").find(".thumbnail-width-config").fadeOut("fast")})})}(jQuery),wpbdpAddonBuild=wpbdpAddons(),jQuery(document).ready(function($){wpbdpAddonBuild.init()}),jQuery(function($){$(document).on("change",".wpbdp-js-toggle",function(){var name=$(this).attr("name"),value=$(this).val(),is_checkbox=$(this).is(":checkbox"),is_radio=$(this).is(":radio"),is_select=$(this).is("select"),toggles=$(this).attr("data-toggles");if(toggles=!is_select||(toggles=$(this).find(":selected").attr("data-toggles"))&&void 0!==toggles?toggles:""){toggles=toggles.startsWith("#")||toggles.startsWith("-")?$(toggles):$("#"+toggles+", ."+toggles);if(0===toggles.length||!is_radio&&!is_checkbox&&!is_select)return;if(is_checkbox&&$(this).is(":checked"))return void toggles.toggleClass("hidden")}(is_select?$(this).find("option"):$('input[name="'+name+'"]')).not('[value="'+value+'"]').each(function(){var toggles_i=$(this).attr("data-toggles");toggles_i&&(toggles_i.startsWith("#")||toggles_i.startsWith("-")?$(toggles_i):$("#"+toggles_i+", ."+toggles_i)).addClass("hidden")})})}),jQuery(function($){$(".wpbdp-admin-tab-nav").on("click","a",function(e){e.preventDefault();var e=$(this).parents("ul").find("li a"),$selected=e.filter(".current"),e=(e.removeClass("current"),$(this).addClass("current"),$(this).attr("href")),e=$(e);0<$selected.length&&$($selected.attr("href")).hide(),e.show()}),$(".wpbdp-admin-tab-nav").each(function(i,v){$(this).find("a:first").trigger("click")})}),jQuery(function($){$(document).on("click",".wpbdp-admin-confirm",function(e){var message=$(this).data("confirm");return message&&void 0!==message||(message="Are you sure you want to do this?"),!!window.confirm(message)||(e.stopImmediatePropagation(),!1)}),$(document).on("click",".wpbdp-admin-ajax",function(e){e.preventDefault();var $btn=$(this),e=$btn.data("ajax"),message=$btn.data("confirm"),$target=$($btn.data("target"));if(!window.confirm(message))return!1;$btn.prop("disabled",!0),$.post(ajaxurl,e,function(res){res.success?($target.removeClass("error").addClass("updated").find("p").html(res.message).show(),$target.fadeOut(1e3)):$target.removeClass("updated").addClass("error").find("p").html(res.error).show(),$btn.prop("disabled",!1)},"json")})});