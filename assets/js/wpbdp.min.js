void 0===window.WPBDP&&(window.WPBDP={}),void 0===window.wpbdp&&(window.wpbdp={}),jQuery(function($){$(".wpbdp-no-js").hide()}),jQuery(document).ready(function($){0<$(".wpbdp-js-select2").length&&$.fn.selectWoo&&$(".wpbdp-js-select2").selectWoo();var sticky=$(".wpbdp-listing-single .wpbdp-sticky-tag");sticky.length&&$("h1:first").append(sticky),wpbdp.main_box={init:function(){},sum_width:function($selector,prop){prop=void 0===prop?"width":prop;var sum=0;return $selector.each(function(){var w=0,w="initial"==prop?$(this).data("initial-width"):"outer"==prop?$(this).outerWidth():"inner"==prop?$(this).innerWidth():$(this).width();sum+=parseInt(w)}),sum},min_width:function(){return this.sum_width(this.$cols_fixed,"initial")},should_resize:function(){return this.$box.find("form").width()>this.min_width()},resize:function(){var available_width,flex_width;this.should_resize()&&(available_width=this.$box.find("form").innerWidth()-this.min_width(),flex_width=Math.floor(available_width/this.$cols_expanding.length)-2,this.$cols_expanding.each(function(){$(this).outerWidth(flex_width)}))}},0<$("#wpbdp-main-box").length&&wpbdp.main_box.init(),0==$(".wpbdp-bar").children().length&&""==$(".wpbdp-bar").text().trim()&&$(".wpbdp-bar").remove(),$(".wpbdp-listing-contact-form .send-message-button").on("click",function(){$(this).removeClass("wpbdp-show-on-mobile").hide(),$(".wpbdp-listing-contact-form .contact-form-wrapper").show()}),$(".wpbdp-listings-sort-options select").on("change",function(e){var selected=$(this).val();location.href=selected})}),jQuery(function($){({init:function(){var t=this;$(".wpbdp-form-field-type-date").each(function(i,v){t.configure_date_picker($(v).find("input"))}),$(window).on("wpbdp_submit_refresh",function(event,submit,section_id){"listing_fields"==section_id&&t.init()})},configure_date_picker:function($e){$e.datepicker({dateFormat:$e.attr("data-date-format"),defaultDate:$e.val(),beforeShow:function(){$("#ui-datepicker-div").addClass("wpbdp-datepicker")}})}}).init()}),WPBDP.fileUpload={resizeIFrame:function(element_id,height){var element_id=jQuery("#wpbdp-upload-iframe-"+element_id)[0],iframeWin=element_id.contentWindow||element_id.contentDocument.parentWindow;iframeWin.document.body&&(element_id.height=height||iframeWin.document.documentElement.scrollHeight||iframeWin.document.body.scrollHeight),0===jQuery(element_id).parents(".wpbdp-social-type-field").length||jQuery(element_id).parent().siblings(".wpbdp-inner-social-field-option-Other").find("input").is(":checked")||jQuery(element_id).parent().hide()},handleUpload:function(o){jQuery(o).parent("form").submit()},finishUpload:function(element_id,upload_id,element){element_id=jQuery("#wpbdp-upload-iframe-"+element_id),element=jQuery('input[name="'+element+'"]'),element.val(upload_id),upload_id=element.siblings(".preview");upload_id.find("img").remove(),upload_id.prepend(element_id.contents().find(".preview").html()),element_id.contents().find(".preview").remove(),element_id.hide(),upload_id.show()},deleteUpload:function(element_id,element){jQuery("#wpbdp-upload-iframe-"+element_id);element_id=jQuery('input[name="'+element+'"]'),element=element_id.siblings(".preview");return element_id.val(""),element.find("img").remove(),element.find("input").val(""),element.hide(),element.siblings().show(),!1}},function($){var sb=wpbdp.listingSubmit={init:function(){0<$(".wpbdp-submit-listing-section-listing_images").length&&sb.images.init()},init_events:function(){$("#wpbdp-submit-listing").on("click",".wpbdp-inner-field-option-select_all",function(e){$(this).parent().find('input[type="checkbox"]').prop("checked",$(this).find("input").is(":checked"))}),$("#wpbdp-submit-listing").on("click",".wpbdp-inner-social-field-option input",function(e){var $icon_element=$(this).parents(".wpbdp-inner-social-field-option").siblings(".wpbdp-upload-widget");"Other"!==$(this).val()?$icon_element.hide():$icon_element.show()})}};sb.images=wpbdp.listingSubmit.images={_initialized:!1,_admin_nonce:"",_slots:0,_slotsRemaining:0,_working:!1,init:function(){this._initialized=!0,this._admin_nonce=$("#image-upload-dnd-area").attr("data-admin-nonce");var t=this;this._admin_nonce||(sb.images._slots=parseInt($("#image-slots-total").text()),sb.images._slotsRemaining=parseInt($("#image-slots-remaining").text())),$("#wpbdp-uploaded-images").on("click",".wpbdp-image-delete-link","click",function(e){e.preventDefault();e=$(this).attr("href");$.post(e,{},function(res){res.success&&$('#wpbdp-uploaded-images .wpbdp-image[data-imageid="'+res.data.imageId+'"]').fadeOut(function(){$(this).remove();var $no_count,n,thumbInput=$("#wpbdp-listing-fields-images input#_thumbnail_id");void 0!==thumbInput&&parseInt(thumbInput.val())===res.data.imageId&&thumbInput.val(""),t._admin_nonce||(t._slotsRemaining++,$("#image-slots-remaining").text(t._slotsRemaining),t._slotsRemaining<t._slots&&$("#image-upload-dnd-area").show()),(t._admin_nonce&&0==$("#wpbdp-uploaded-images .wpbdp-image").length||!t._admin_nonce&&t._slotsRemaining==t._slots)&&$("#current-images-header").show(),(t._admin_nonce||0<t._slotsRemaining)&&($("#image-upload-dnd-area .dnd-area-inside").show(),$("#noslots-message").hide(),$("#image-upload-dnd-area").removeClass("error"),$("#image-upload-dnd-area .dnd-area-inside-error").hide()),0<$("#wpbdp-listing-fields.postbox").length&&(thumbInput=$(".wpbdp-admin-tab-nav li a .with-image-count"),$no_count=$(".wpbdp-admin-tab-nav li a .no-image-count"),(n=$("#wpbdp-uploaded-images .wpbdp-image").length)?($no_count.addClass("hidden"),thumbInput.removeClass("hidden").find("span").text(n)):(thumbInput.addClass("hidden"),$no_count.removeClass("hidden")))})},"json")}),wpbdp.dnd.setup($("#image-upload-dnd-area"),{init:function(){t._admin_nonce||0<t._slotsRemaining||($("#image-upload-dnd-area .dnd-area-inside").hide(),$("#noslots-message").show(),$("#image-upload-dnd-area").addClass("error"),$("#image-upload-dnd-area .dnd-area-inside-error").show())},validate:function(data){return $(".image-upload-wrapper .error").remove(),t._admin_nonce||$(this).siblings(".wpbdp-msg").remove(),!0},done:function(res){var n,uploadErrors=!1;(uploadErrors=res.success?void 0!==res.data.uploadErrors&&res.data.uploadErrors:[res.error])?(uploadErrors=$("<div>").addClass("wpbdp-msg error").html(uploadErrors),$(uploadErrors).insertAfter($(".area-and-conditions")),$("#image-upload-dnd-area .dnd-area-inside").show()):($("#current-images-header").hide(),$("#wpbdp-uploaded-images").append(res.data.html),1==$("#wpbdp-uploaded-images .wpbdp-image").length&&$('#wpbdp-uploaded-images .wpbdp-image:first input[name="thumbnail_id"] ').attr("checked","checked"),t._admin_nonce||(t._slotsRemaining-=res.data.attachmentIds.length,$("#image-slots-remaining").text(t._slotsRemaining),0==t._slotsRemaining&&($("#image-upload-dnd-area .dnd-area-inside").hide(),$("#noslots-message").show(),$("#image-upload-dnd-area").addClass("error"),$("#image-upload-dnd-area .dnd-area-inside").hide(),$("#image-upload-dnd-area .dnd-area-inside-error").show())),0<$("#wpbdp-listing-fields.postbox").length&&(uploadErrors=$(".wpbdp-admin-tab-nav li a .with-image-count"),res=$(".wpbdp-admin-tab-nav li a .no-image-count"),(n=$("#wpbdp-uploaded-images .wpbdp-image").length)?(res.addClass("hidden"),uploadErrors.removeClass("hidden").find("span").text(n)):(uploadErrors.addClass("hidden"),res.removeClass("hidden"))))}}),$("input#wpbdp_media_manager").on("click",function(e){e.preventDefault();var url=$(this).attr("data-action"),image_frame=wp.media({title:"Select Media",multiple:!1,library:{type:"image"}});image_frame.on("close",function(){var selection=image_frame.state().get("selection"),gallery_ids=new Array,i=0,selection=(selection.each(function(attachment){gallery_ids[i]=attachment.id,i++}),gallery_ids.join(","));selection&&$.post(url,{image_ids:selection},function(res){var errorMsg;if(errors=res.success?void 0!==res.data.errors&&res.data.errors:[res.data.errors])errorMsg=$("<div>").addClass("wpbdp-msg error").html(errors),$(res.data.errorElement).prepend(errorMsg);else{if($(res.data.errorElement+" .wpbdp-msg.error").remove(),"listing_field"===res.data.source)return res.data.inputElement?((errorMsg=$('input[name="'+res.data.inputElement+'"]')).val(res.data.media_id),(errorMsg=errorMsg.siblings(".preview")).find("img").remove(),errorMsg.prepend(res.data.html),errorMsg.siblings().hide(),void errorMsg.show()):void 0;$("#current-images-header").hide(),$(res.data.previewElement).append(res.data.html)}})}),image_frame.open()}),$("#wpbdp-uploaded-images").sortable({axis:"y",cursor:"move",opacity:.9,update:function(ev,ui){var sorted=$(this).sortable("toArray",{attribute:"data-imageid"}),no_images=$(this).find(".wpbdp-image").length;$.each(sorted,function(i,v){$('input[name="images_meta['+v+'][order]"]').attr("value",no_images-i),0===i&&0<(i=$('input[name="_thumbnail_id"]')).length&&i.val(v)})}})}};$(document).ready(function(){0!=$("#wpbdp-submit-listing").length&&(sb.init_events(),0!=$(".wpbdp-submit-page").length)&&sb.init()})}(jQuery);