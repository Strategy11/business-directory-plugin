jQuery(function($){({init:function(){var self,$form=$("form#wpbdp-checkout-form");0!=$form.length&&((self=this).$form=$form,this.$container=this.$form.find("#wpbdp-checkout-form-fields"),this.payment_key=this.$form.find('input[name="payment"]').val(),this.nonce=this.$form.find('input[name="_wpnonce"]').val(),this.working=!1,this.$form.find('input[name="gateway"]').change(function(){var gateway;self.working||(gateway=self.$form.find('input[name="gateway"]:checked').val())&&self.load_gateway(gateway)}),this.$form.find('input[name="gateway"]').trigger("change"))},load_gateway:function(gateway_id){var self=this,url=(self.$container.html(""),self.working=!0,wpbdp_global.ajaxurl),url=(url+=0<url.indexOf("?")?"&":"?")+("payment="+self.payment_key+"&");$.post(url+="gateway="+gateway_id,{action:"wpbdp_ajax",handler:"checkout__load_gateway",_wpnonce:self.nonce},function(res){self.$container.removeClass().addClass("wpbdp-payment-gateway-"+gateway_id+"-form-fields"),self.$container.html(res),self.working=!1,$(window).trigger("wpbdp-payment-gateway-loaded",gateway_id);res=$('.wpbdp-checkout-submit input[type="submit"]:visible');"stripe"===gateway_id?res.on("click",self.sendToStripe):res.off("click",self.sendToStripe)})},sendToStripe:function(event){return"stripe"===$('form#wpbdp-checkout-form [name="gateway"]:checked').val()&&(event.preventDefault(),event=document.getElementById("wpbdp-stripe-checkout-configuration"))&&(event=$.parseJSON(event.dataset.configuration),Stripe(event.key,{stripeAccount:event.accountId}).redirectToCheckout({sessionId:event.sessionId}).then(function(result){console.error("Error with Stripe checkout: "+result.error.message)})),!1}}).init(),$(document).on("click",".wpbdp-payment-receipt-print",function(e){var mywindow;e.preventDefault(),e=$(".wpbdp-payment-receipt"),(mywindow=window.open("","PRINT","height=400,width=600")).document.write("<html>"),mywindow.document.write($("head").html()),mywindow.document.write("</html><body >"),mywindow.document.write($(e).wrap("<p/>").parent().html()),mywindow.document.write("</body></html>"),mywindow.document.close(),mywindow.focus(),mywindow.onload=function(){mywindow.print(),mywindow.close()}})});