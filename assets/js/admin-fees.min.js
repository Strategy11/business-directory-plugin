jQuery(function($){var $form=$("form#wpbdp-fee-form");if(0!=$form.length){var update_form_ui=function(event){var fee__days=$('input[name="_days"]:checked',$form).val(),$textfield=$('input[name="fee[days]"]',$form);0==fee__days?$textfield.prop("disabled",!0).val("0"):($textfield.prop("disabled",!1),event&&$("#wpbdp-fee-form-days",$form).is(event.target)&&$textfield.focus());var $pricing=$('input[name="fee[pricing_model]"]',$form),limit_categories="1"==$('select[name="limit_categories"]',$form).val(),pricing=$pricing.filter(":checked").val(),$category_chooser=$("#limit-categories-list",$form),selected_categories=[];if(limit_categories?($category_chooser.removeClass("hidden"),$("select",$category_chooser).length>0?(selected_categories=$("select",$category_chooser).val(),selected_categories||(selected_categories=[])):selected_categories=$("input:checked",$category_chooser).map(function(i,cb){return $(cb).val()}).get(),selected_categories.length>0?$pricing.filter('[value="variable"]').parent().show():($pricing.filter('[value="variable"]').parent().hide(),pricing=$pricing.val(["flat"]).val())):($category_chooser.addClass("hidden"),$pricing.filter('[value="variable"]').parent().show()),$(".fee-pricing-details").not(".pricing-details-"+pricing).addClass("hidden"),$(".fee-pricing-details.pricing-details-"+pricing,$form).removeClass("hidden"),"variable"==pricing){var $rows=$(".wpbdp-variable-pricing-configurator-row",$form);limit_categories?($rows.addClass("hidden"),$.each(selected_categories,function(i,val){$rows.filter('[data-term-id="'+val+'"]').removeClass("hidden")})):$rows.removeClass("hidden")}};update_form_ui(),$('input[name="fee[days]"]',$form).blur(function(){var val=parseInt($.trim($(this).val()),10);$(this).val(isNaN(val)?"0":Math.max(0,Math.round(val)))}),$('input[name="_days"],select[name="limit_categories"],input[name="fee[pricing_model]"],#limit-categories-list input[type="checkbox"],#limit-categories-list select').change(update_form_ui),$("#limit-categories-list select").select2({placeholder:$("#limit-categories-list select").attr("placeholder")}),$form.submit(function(){return $('input[name="fee[days]"]',$form).prop("disabled",!1),!0});var $color_picker=$form.find("#fee-bgcolor-picker"),$color_picker_field=$color_picker.find("#fee-bgcolor-value");$color_picker_field.val()&&($color_picker_field.css("color",$color_picker_field.val()),$color_picker_field.css("background-color",$color_picker_field.val())),$color_picker_field.iris({mode:"hsl",hide:!1,width:200,palettes:!0,border:!1,target:"#fee-bgcolor-picker-iris",change:function(event,ui){$(this).css("color",ui.color.toString()),$(this).css("background-color",ui.color.toString())}}).focus(function(){$color_picker.find(".color-selection").show()}),$color_picker.find("a.iris-square-value").click(function(e){e.preventDefault(),$color_picker.find(".color-selection").hide()}),$("a.reset-btn",$color_picker).click(function(e){e.preventDefault(),$color_picker_field.val("").css("background-color","#ffffff"),$color_picker.find(".color-selection").hide()}),$("a.close-btn",$color_picker).click(function(e){e.preventDefault(),$color_picker.find(".color-selection").hide()})}});