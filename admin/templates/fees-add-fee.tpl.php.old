<?php
if (!function_exists('_wpbdp_render_category')) {
function _wpbdp_render_category($cat, $selected=array(), $level=0) {
    $html = '';

    $level_string = str_repeat('&mdash;&nbsp;', $level);
    $html .= sprintf('<option value="%s" %s>%s%s</option>', $cat->term_id,
                     in_array($cat->term_id, $selected) ? 'selected="selected"' : '',
                     $level_string, $cat->name);

    if ($cat->subcategories) {
        foreach ($cat->subcategories as $subcat) {
            $html .= _wpbdp_render_category($subcat, $selected, $level+1);
        }
    }

    return $html;   
}
}
?>


<form id="wpbdp-fee-form" action="" method="POST">
    <?php if ( $fee->id ): ?>
    <input type="hidden" name="fee[id]" value="<?php echo $fee->id; ?>" />
    <?php endif; ?>
    <table class="form-table">
        <tbody>
            <tr class="form-field form-required">
                <th scope="row">
                    <label> <?php _ex('Fee Amount', 'fees admin', 'WPBDM'); ?> <span class="description">(required)</span></label>
                </th>
                <td>
                    <?php if ( 'free' == $fee->tag ): ?>
                    0.0
                    <?php else: ?>
                    <input name="fee[amount]"
                           type="text"
                           aria-required="true"
                           value="<?php echo floatval( $fee->amount ); ?>"
                           style="width: 100px;" />
                    <?php endif; ?>
                </td>
            </tr>   
        </tbody>
    </table>

    <?php if ( $fee_extra_settings ): ?>
    <div class="extra-settings">
    <?php echo $fee_extra_settings; ?>
    </div>
    <?php endif; ?>

    <?php echo submit_button( $fee->is_new() ? _x('Add Fee', 'fees admin', 'WPBDM') : _x('Update Fee', 'fees admin', 'WPBDM' ) ); ?>
</form>


